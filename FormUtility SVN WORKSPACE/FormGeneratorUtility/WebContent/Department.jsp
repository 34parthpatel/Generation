<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@include file="datatableLib.jsp" %><!DOCTYPE html ><html><head><title>Department</title><link rel="stylesheet" href="../css/bootstrap.min.css"><link rel="stylesheet" href="../css/jquery.datetimepicker.min.css"><link rel="stylesheet" href="../css/forms.css"><!-- <script src="../js/jquery-3.2.1.min.js"></script> --><script src="../js/bootstrap.min.js"></script><script src="../js/jquery.datetimepicker.full.js"></script><script src="../js/formutility.js"></script><script src="../js/custom_alert.js"></script><script src="../js/bootstrap-show-password.min.js"></script><script src="../js/js-form-validator.min.js"></script><script src="../js/jquery.serializejson.js"></script><script> $(document).ready(function(){    $('[data-toggle="popover"]').popover();     $('body').tooltip({ selector: '[rel=tooltip]' });}); </script><style type="text/css"> label[id*="-error"] { color: red; } </style></head><body><a href='../index' class='glyphicon glyphicon-home btn-lg' style=' text-decoration:none; margin: 10px 20px; color: black;'></a><a  class='glyphicon glyphicon-question-sign btn-lg' href='#' title='Help' data-toggle='popover'  data-placement='left' data-trigger='focus' data-content='help' style=' text-decoration:none;  position:absolute;  top:0; right:0; margin: 10px 20px; color: black;'></a><div class="container"><center><h2>Department</h2></center><form action="../insertForm/Department" id="idDepartment" class="form-horizontal" method="post" enctype="multipart/form-data" ><div class="form-group"><label class="control-label col-sm-4">Dept Name</label><div class="col-sm-5"><input type="text"  class="form-control" name="dept_name" id="dept_name" tabindex="2" maxlength="15" title="null" rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Aplha_numeric" /></div></div><div class="form-group"><label class="control-label col-sm-4">Password</label><div class="col-sm-5"><input type="password"  class="form-control" name="password" id="password" tabindex="3" maxlength="12" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Password" /><input type="checkbox" onclick="showPassword('password')" >Show Password</div></div><div class="form-group"><label class="control-label col-sm-4">Address</label><div class="col-sm-5"><textarea name="address" id="address"  class="form-control" placeholder="Enter text..." rows="5" cols="30" tabindex="4" maxlength="150" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Aplha_numeric" ></textarea></div></div><div class="form-group"><label class="control-label col-sm-4">Gender</label><div class="col-sm-5"> <div class='row'> <div class='col-sm-6'><input type="radio" name="gender" id="gender" tabindex="5" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="Male"  data-rule="required"  />Male<br /></div> <div class='col-sm-6'><input type="radio" name="gender" id="gender" tabindex="5" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="Female"  data-rule="required"  />Female<br /></div> <div class='col-sm-6'><input type="radio" name="gender" id="gender" tabindex="5" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="Other"  data-rule="required"  />Other<br /></div></div></div></div><div class="form-group"><label class="control-label col-sm-4">Date1</label><div class="col-sm-5"><input type="text"  class="form-control" name="date1" id="date1" tabindex="6" onkeypress="return false;" readonly title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required" /></div></div><div class="form-group"><label class="control-label col-sm-4">Project name</label><div class="col-sm-5"> <div class='row'> <div class='col-sm-6'><input type="checkbox" name="projectname" id="projectname1" tabindex="7" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="projectone" /> projectone<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname" id="projectname2" tabindex="7" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="projecttwo" /> projecttwo<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname" id="projectname3" tabindex="7" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="projectthree" /> projectthree<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname" id="projectname4" tabindex="7" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  value="projectfour" /> projectfour<br /></div></div></div></div><div class="form-group"><label class="control-label col-sm-4">Number</label><div class="col-sm-5"><input type="number"  class="form-control" name="number1" id="number1" tabindex="9" step="1" title="null"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Digit_Only" /></div></div><div class="form-group"><label class="control-label col-sm-4">link</label><div class="col-sm-5"><a href='https://www.google.com' tabindex=11 title='link.' rel="tooltip" data-toggle="tooltip" data-placement="right" >link</a></div></div><div class="form-group"><label class="control-label col-sm-4">data</label><div class="col-sm-5"><select class="form-control" name="dt1" id="dt1" tabindex="12" title="null"   rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required"  ><option value='' selected>Please select</option><option value='1.2'>1.2</option><option value='2.1'>2.1</option><option value='3.2'>3.2</option><option value='4.2'>4.2</option><option value='5.2'>5.2</option></select></div></div><div class="form-group"><div class="col-sm-offset-4 col-sm-5"><input type="submit" class="btn btn-success" id="submitDepartment" value="Submit" />&nbsp <a class='btn btn-default' data-toggle='modal' title='null' rel="tooltip" data-toggle="tooltip" data-placement="right" data-target='#myModal' tabindex=10 onclick="alertFuntion('Alert','alert box...','TYPE.save','Save','TYPE.cancel','Cancel') ">Alert</a></div></div></form><font color='red'><p id="errMessage"></p></font><c:if test="${not empty message}"><font color='green'><c:out value="${message }"></c:out></font></c:if><c:if test="${not empty errMessage}"><font color='red'> ${errMessage } </font></c:if></div><div class="container" style="overflow-x:auto;"><table id="tableDepartment"><thead><tr><th>Dept Name</th><th>Password</th><th>Address</th><th>Gender</th><th>Date1</th><th>Project name</th><th>Number</th><th>data</th><th>Edit</th><th>Delete</th></tr></thead><tfoot><tr><th>Dept Name</th><th>Password</th><th>Address</th><th>Gender</th><th>Date1</th><th>Project name</th><th>Number</th><th>data</th><th>Edit</th><th>Delete</th></tr></tfoot></table><jsp:include page='alertForm.jsp'></jsp:include></div><div id="dialogDepartment" style="display: none"><form id="dialogformDepartment" class="form-horizontal"><input type="hidden" id="formOption" value=""><input type="hidden" id="ID" value=""><div class="form-group"><label class="control-label col-sm-4">Dept Name</label><div class="col-sm-5"><input type="text"  class="form-control" name="dept_name" id="df_dept_name" tabindex=":tabindex" maxlength="15" title="" /></div></div><div class="form-group"><label class="control-label col-sm-4">Password</label><div class="col-sm-5"><input type="password"  class="form-control" name="password" id="df_password" tabindex=":tabindex" maxlength="12" title=""  /><input type="checkbox" onclick="showPassword('df_password')" >Show Password<label id="df_password-error" class="error" for="df_password"></label></div></div><div class="form-group"><label class="control-label col-sm-4">Address</label><div class="col-sm-5"><textarea name="address" id="df_address"  class="form-control" placeholder="Enter text..." rows="5" cols="30" tabindex=":tabindex" maxlength="150" title=""  ></textarea></div></div><div class="form-group"><label class="control-label col-sm-4">Gender</label><div class="col-sm-5"> <div class='row'> <div class='col-sm-6'><input type="radio" name="gender" id="df_gender" tabindex=":tabindex" title=""  value="Male"  />Male<br /></div> <div class='col-sm-6'><input type="radio" name="gender" id="df_gender" tabindex=":tabindex" title=""  value="Female"  />Female<br /></div> <div class='col-sm-6'><input type="radio" name="gender" id="df_gender" tabindex=":tabindex" title=""  value="Other"  />Other<br /></div></div><label id="gender-error" class="error" for="gender"></label></div></div><div class="form-group"><label class="control-label col-sm-4">Date1</label><div class="col-sm-5"><input type="text"  class="form-control" name="date1" id="df_date1" tabindex=":tabindex" onkeypress="return false;" readonly title=""  /></div></div><div class="form-group"><label class="control-label col-sm-4">Project name</label><div class="col-sm-5"> <div class='row'> <div class='col-sm-6'><input type="checkbox" name="projectname[]" id="df_projectname" tabindex=":tabindex" title=""  value="projectone" required /> projectone<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname[]" id="df_projectname" tabindex=":tabindex" title=""  value="projecttwo" required /> projecttwo<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname[]" id="df_projectname" tabindex=":tabindex" title=""  value="projectthree" required /> projectthree<br /></div> <div class='col-sm-6'><input type="checkbox" name="projectname[]" id="df_projectname" tabindex=":tabindex" title=""  value="projectfour" required /> projectfour<br /></div></div><label id="projectname[]-error" class="error" for="projectname[]" ></label></div></div><div class="form-group"><label class="control-label col-sm-4">Number</label><div class="col-sm-5"><input type="number"  class="form-control" name="number1" id="df_number1" tabindex=":tabindex" step="1" title=""  /></div></div><div class="form-group"><label class="control-label col-sm-4">Alert</label><div class="col-sm-5"><a class='btn btn-default' data-toggle='modal' title='null' rel="tooltip" data-toggle="tooltip" data-placement="right" data-target='#myModal' tabindex=10 onclick="alertFuntion('Alert','alert box...','TYPE.save','Save','TYPE.cancel','Cancel') ">Alert</a></div></div><div class="form-group"><label class="control-label col-sm-4">link</label><div class="col-sm-5"><a href='https://www.google.com' tabindex=11 title='link.' rel="tooltip" data-toggle="tooltip" data-placement="right" >link</a></div></div><div class="form-group"><label class="control-label col-sm-4">data</label><div class="col-sm-5"><select class="form-control" name="dt1" id="df_dt1" tabindex="12" title=""   ><option value='' selected>Please select</option><option value='1.2'>1.2</option><option value='2.1'>2.1</option><option value='3.2'>3.2</option><option value='4.2'>4.2</option><option value='5.2'>5.2</option></select></div></div></form></div></body><script src="../js/formutility_date.js"></script><script>$(function(){ $('#submitDepartment').click(function() {if(!$('input[name=projectname]:checked').length > 0) {document.getElementById("errMessage").innerHTML = "Project name can not be null";return false;}document.getElementById("errMessage").innerHTML = ""; return true; }); });</script><script>new Validator(document.querySelector('#idDepartment'), function (err, res) {return res;},options = { rules : { Aplha_numeric: function(a){ return (new RegExp('^[A-Za-z0-9]{1}[A-Za-z0-9\\s]{0,}$')).test(a) },Password: function(a){ return (new RegExp('(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z].*[A-Z])(?=.*[@#$%^&+=].*[@#$%^&+=])(?=\\S+$).{8,}')).test(a) },Aplha_numeric: function(a){ return (new RegExp('^[A-Za-z0-9]{1}[A-Za-z0-9\\s]{0,}$')).test(a) },Digit_Only: function(a){ return (new RegExp('^[1-9]{1,}[0-9]{0,}$')).test(a) },},messages : { en : { Aplha_numeric:{ empty: "Only alphanumeric allow.", incorrect: "Only alphanumeric allow." },Password:{ empty: "Password must be, 2 Letter Capital,2 special char ,and any letter and any digit", incorrect: "Password must be, 2 Letter Capital,2 special char ,and any letter and any digit" },Aplha_numeric:{ empty: "Only alphanumeric allow.", incorrect: "Only alphanumeric allow." },Digit_Only:{ empty: "Only digit allow, first character must be not Zero.", incorrect: "Only digit allow, first character must be not Zero." },}}});</script><script>$('#df_date1').datetimepicker({timepicker:false,defaultDate:'2017-12-13',minDate:'2017-12-13',maxDate:'2017-12-15',format: 'Y-m-d',formatDate : 'Y-m-d',});</script><script>var oTable = $('#tableDepartment').dataTable({ "dom" : 'Blfrtip',  "buttons" : [ { text: 'Add', action: function ( e, dt, node, config ) { var validator = $('#dialogformDepartment').validate(); document.getElementById('dialogformDepartment').reset(); validator.resetForm(); $("#formOption").val("add"); $('#dialogDepartment').dialog('open'); } } ], "columns":[{"data" : "dept_name"},{"data" : "password"},{"data" : "address"},{"data" : "gender"},{"data" : "date1"},{"data" : "projectname"},{"data" : "number1"},{"data" : "dt1"},{ "data" : "edit" }, { "data" : "delete"	},],"columnDefs": [ { orderable: false, targets: [-1,-2] } ], "processing" : true,  "serverSide" : true,  "paging": true,  "ajax" : {  "contentType": "application/json",  "data": function ( d ) { return JSON.stringify( d ); },  "url" : "../listForDatatable/Department",  "dataSrc" : "data",  "type" : "POST" } } ); $('#tableDepartment_filter input').unbind();$('#tableDepartment_filter input').bind('keyup', function(e) {  if(e.keyCode == 13) {    oTable.fnFilter(this.value); 	} 	else if(!this.value.trim()) { oTable.fnFilter(this.value); 	}  });$('#tableDepartment tfoot th').each( function () {      var title = $(this).text(); $(this).html( '<input type="text" placeholder="Search '+title+'" />' );  } );  oTable.api().columns().every( function () {  var that = this;    $( 'input', this.footer() ).on( 'keyup change', function (e) { 	   if(e.keyCode == 13) { 	     that.search( this.value).draw(); 	   }		else if(!this.value.trim()) { 		  /*fire when search box gets empty */		  that.search( this.value).draw();		}   });  });function editRow(id)	{ var validator = $('#dialogformDepartment').validate(); document.getElementById('dialogformDepartment').reset(); validator.resetForm(); $("#ID").val(""); $("#formOption").val("edit"); document.getElementById("errMessage").innerHTML = ""; $.ajax({ type : "POST", url : "../restFatchDataFromID/Department", data : { "id" : id }, cache : false, success : function(result) { var jsonData = JSON.parse(result); if (jsonData['error']) { $.each(jsonData['error'],function(key,value) { document.getElementById("errMessage").innerHTML += "<font color='red'>"+ value+ "</font><br>";}); } else { $.each(jsonData, function(key, value) { { if (key == 'ID') { $("#ID").val(value); } if ($("#df_" + key).is(':radio')) { $("input[id=df_" + key + "][value=\"" + value + "\"]").prop('checked', true); } else if ($("#df_" + key).is(':checkbox')) { if (value.indexOf(',') > -1) { var array = value.split(','); for(var i=0;i<array.length;i++) { $("input[id=df_" + key + "][value=\"" + array[i] + "\"]").prop('checked', true); } } else { $("input[id=df_" + key + "][value=\"" + value + "\"]").prop('checked', true); }  } else { $("#df_" + key).val(value); } } }); $('#dialogDepartment').dialog('open'); } }, error : function(XMLHttpRequest,textStatus,errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Problem in fatching data.</font>"; } }); }function deleteRow(id) {	var value = confirm("Are you sure want to delete this record?"); if(value == true) { document.getElementById("errMessage").innerHTML = "";$.ajax({ type : "POST", url : "../delete/Department", data: "{\"ID\":"+id+"}", contentType: "application/json; charset=utf-8", dataType: "json", cache: false, success : function(result) { if(result['error']) { $.each(result['error'], function(key, value) { document.getElementById("errMessage").innerHTML += "<font color='red'>"+value+"</font><br>"; }); } else if(result['success']) { $.each(result['success'], function(key, value) { document.getElementById("errMessage").innerHTML += "<font color='green'>"+value+"</font><br>"; }); oTable.rows().remove().draw(); oTable.draw(); } }, error: function(XMLHttpRequest, textStatus, errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Record deletion failed.</font>"; } });  /*$('#tableDepartment').DataTable().draw(); */  } }function downloadFile(name) { alert(name); $.ajax({ type : "POST", url : "../downloadFile/Department", data : { "fileName" : name }, cache : false, success : function(result) { document.getElementById("errMessage").innerHTML += "<font color='green'>Success</font><br>"; }, error : function(XMLHttpRequest, textStatus, errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Not Success.</font>"; } }); }</script><script>$(function() { $('#dialogDepartment').dialog({autoOpen : false,title:'Department',height: 500,width: 550,buttons : { 'Send' : function() { if ($('#dialogformDepartment').valid()) { var ajaxUrl = ""; var jsonData = JSON.stringify($('#dialogformDepartment').serializeJSON()); if($("#formOption").val() == "add") { ajaxUrl = "../insert/Department"; } else if ($("#formOption").val() == "edit") { ajaxUrl = "../update/Department"; jsonData = jsonData.substring(0, jsonData.length-1) + ",\"ID\":\""+$("#ID").val()+"\"}"; } else { ajaxUrl = ""; } $('#dialogDepartment').dialog('close');$.ajax({	type : "POST", url : ajaxUrl, data: jsonData, contentType: "application/json; charset=utf-8", dataType: "json", cache: false, success : function(result) { if(result['error']) { console.log(result['error']); $.each(result['error'], function(key, value) { console.log(value); document.getElementById("errMessage").innerHTML = ""; document.getElementById("errMessage").innerHTML += "<font color='red'>"+value+"</font><br>"; }); } else if(result['success']) { console.log(result['success']); $.each(result['success'], function(key, value) { console.log(value); document.getElementById("errMessage").innerHTML = ""; document.getElementById("errMessage").innerHTML += "<font color='green'>"+value+"</font><br>"; });  /*$('#tableDepartment').DataTable().draw();*/  /*oTable.ajax.reload();*/  oTable.rows().remove().draw(); oTable.rows.add(result); oTable.draw(); } }, error: function(XMLHttpRequest, textStatus, errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Record insertion failed.</font>"; } });  } } } });$('#dialogformDepartment').validate({rules : {dept_name:{ required: true, pattern: /^[A-Za-z0-9]{1}[A-Za-z0-9\s]{0,}$/ },password:{ required: true, pattern: /(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z].*[A-Z])(?=.*[@#$%^&+=].*[@#$%^&+=])(?=\S+$).{8,}/ },address:{ required: true, pattern: /^[A-Za-z0-9]{1}[A-Za-z0-9\s]{0,}$/ },gender:{ required: true },date1:{ required: true },projectname:{ required: true },number1:{ required: true, pattern: /^[1-9]{1,}[0-9]{0,}$/ },dt1:{ required: true },}, messages: {df_dept_name:{pattern: "Only alphanumeric allow." },df_password:{pattern: "Password must be, 2 Letter Capital,2 special char ,and any letter and any digit" },df_address:{pattern: "Only alphanumeric allow." },gender:{ required: "Please select Gender" },date1:{ required: "Date1 is required" },projectname:{ required: "Please select atleast one Project name" },df_number1:{pattern: "Only digit allow, first character must be not Zero." },dt1:{ required: "data is required" },} }); }); </script></html>
