<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@include file="datatableLib.jsp" %><!DOCTYPE html ><html><head><title>demo4</title><link rel="stylesheet" href="../css/bootstrap.min.css"><link rel="stylesheet" href="../css/jquery.datetimepicker.min.css"><link rel="stylesheet" href="../css/forms.css"><!-- <script src="../js/jquery-3.2.1.min.js"></script> --><script src="../js/bootstrap.min.js"></script><script src="../js/jquery.datetimepicker.full.js"></script><script src="../js/formutility.js"></script><script src="../js/custom_alert.js"></script><script src="../js/bootstrap-show-password.min.js"></script><script src="../js/js-form-validator.min.js"></script><script src="../js/jquery.serializejson.js"></script><script> $(document).ready(function(){    $('[data-toggle="popover"]').popover();     $('body').tooltip({ selector: '[rel=tooltip]' });}); </script><style type="text/css"> label[id*="-error"] { color: red; } </style></head><body><a href='../index' class='glyphicon glyphicon-home btn-lg' style=' text-decoration:none; margin: 10px 20px; color: black;'></a><a  class='glyphicon glyphicon-question-sign btn-lg' href='#' title='Help' data-toggle='popover'  data-placement='left' data-trigger='focus' data-content='help demo4' style=' text-decoration:none;  position:absolute;  top:0; right:0; margin: 10px 20px; color: black;'></a><div class="container"><center><h2>demo4</h2></center><form action="../insertForm/demo4" id="iddemo4" class="form-horizontal" method="post" ><div class="form-group"><label class="control-label col-sm-4">code</label><div class="col-sm-5"><input type="text"  class="form-control" name="code" id="code" tabindex="1" maxlength="5" title="code" rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Digit_Only" /></div></div><div class="form-group"><label class="control-label col-sm-4">name</label><div class="col-sm-5"><input type="text"  class="form-control" name="name" id="name" tabindex="1" maxlength="15" title="name" rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required|Only_aplha" /></div></div><div class="form-group"><label class="control-label col-sm-4">dt</label><div class="col-sm-5"><input type="text"  class="form-control" name="dt" id="dt" tabindex="3" onkeypress="return false;" readonly title="date and time"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required" /></div></div><div class="form-group"><label class="control-label col-sm-4">date of birth</label><div class="col-sm-5"><input type="text"  class="form-control" name="dob" id="dob" tabindex="4" onkeypress="return false;" readonly title="Date of birth"  rel="tooltip" data-toggle="tooltip" data-placement="right"  data-rule="required" /></div></div><div class="form-group"><div class="col-sm-offset-4 col-sm-5"><input type="submit" class="btn btn-success" id="submitdemo4" value="Submit" /></div></div></form><font color='red'><p id="errMessage"></p></font><c:if test="${not empty message}"><font color='green'><c:out value="${message }"></c:out></font></c:if><c:if test="${not empty errMessage}"><font color='red'> ${errMessage } </font></c:if></div><div class="container" style="overflow-x:auto;"><table id="tabledemo4"><thead><tr><th>code</th><th>name</th><th>dt</th><th>date of birth</th><th>Edit</th><th>Delete</th></tr></thead></table></div><div id="dialogdemo4" style="display: none"><form id="dialogformdemo4" class="form-horizontal"><input type="hidden" id="formOption" value=""><input type="hidden" id="ID" value=""><div class="form-group"><label class="control-label col-sm-4">code</label><div class="col-sm-5"><input type="text"  class="form-control" name="code" id="df_code" tabindex=":tabindex" maxlength="5" title="" /></div></div><div class="form-group"><label class="control-label col-sm-4">name</label><div class="col-sm-5"><input type="text"  class="form-control" name="name" id="df_name" tabindex=":tabindex" maxlength="15" title="" /></div></div><div class="form-group"><label class="control-label col-sm-4">dt</label><div class="col-sm-5"><input type="text"  class="form-control" name="dt" id="df_dt" tabindex=":tabindex" onkeypress="return false;" readonly title=""  /></div></div><div class="form-group"><label class="control-label col-sm-4">date of birth</label><div class="col-sm-5"><input type="text"  class="form-control" name="dob" id="df_dob" tabindex=":tabindex" onkeypress="return false;" readonly title=""  /></div></div></form></div></body><script src="../js/formutility_date.js"></script><script>$(function(){ $('#submitdemo4').click(function() {document.getElementById("errMessage").innerHTML = ""; return true; }); });</script><script>new Validator(document.querySelector('#iddemo4'), function (err, res) {return res;},options = { rules : { Digit_Only: function(a){ return (new RegExp('^[1-9]{1,}[0-9]{0,}$')).test(a) },Only_aplha: function(a){ return (new RegExp('^[A-Za-z]{0,}$')).test(a) },},messages : { en : { Digit_Only:{ empty: "Only digit allow, first character must be not Zero.", incorrect: "Only digit allow, first character must be not Zero." },Only_aplha:{ empty: "Only alphabets allow.", incorrect: "Only alphabets allow." },}}});</script><script>$('#df_dt').datetimepicker({minDate:'-1970/01/01',format: 'Y-m-d H:i',formatDate: 'Y-m-d H:i',step : 1,});$('#df_dob').datetimepicker({timepicker:false,maxDate:'+1970/01/01',format: 'Y-m-d',formatDate : 'Y-m-d',});</script><script>var oTable = $('#tabledemo4').DataTable({ "dom" : 'Blfrtip',  "buttons" : [ { text: 'Add', action: function ( e, dt, node, config ) { var validator = $('#dialogformdemo4').validate(); document.getElementById('dialogformdemo4').reset(); validator.resetForm(); $("#formOption").val("add"); $('#dialogdemo4').dialog('open'); } } ], "columns":[{"data" : "code"},{"data" : "name"},{"data" : "dt"},{"data" : "dob"},{ "data" : "edit" }, { "data" : "delete"	},], "processing" : true,  "serverSide" : true,  "paging": true,  "ajax" : {  "contentType": "application/json",  "data": function ( d ) { return JSON.stringify( d ); },  "url" : "../listForDatatable/demo4",  "dataSrc" : "data",  "type" : "POST" } } ); function editRow(id)	{ var validator = $('#dialogformdemo4').validate(); document.getElementById('dialogformdemo4').reset(); validator.resetForm(); $("#ID").val(""); $("#formOption").val("edit"); var allData = oTable.row(id-1).data(); $.each(allData, function(key, value) { if(key=='id') { $("#ID").val(value); } if($("#df_"+key).is(':radio')) { $("input[name="+key+"][value=" + value + "]").attr('checked', 'checked'); } else if($("#df_"+key).is(':checkbox')) { $("input[name="+key+"][value=" + value + "]").attr('checked', 'checked');  } else { $("#df_"+key).val(value); } }); $('#dialogdemo4').dialog('open'); } function deleteRow(id) {	var value = confirm("Are you sure want to delete this record?"); if(value == true) { $.ajax({ type : "POST", url : "../delete/demo4", data: "{\"ID\":"+id+"}", contentType: "application/json; charset=utf-8", dataType: "json", cache: false, success : function(result) { if(result['error']) { $.each(result['error'], function(key, value) { document.getElementById("errMessage").innerHTML += "<font color='red'>"+value+"</font><br>"; }); } else if(result['success']) { $.each(result['success'], function(key, value) { document.getElementById("errMessage").innerHTML += "<font color='green'>"+value+"</font><br>"; }); } }, error: function(XMLHttpRequest, textStatus, errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Record insertion failed.</font>"; } }); $('#tabledemo4').DataTable().draw(); } }</script><script>$(function() { $('#dialogdemo4').dialog({autoOpen : false,title:'demo4',height: 500,width: 550,buttons : { 'Send' : function() { if ($('#dialogformdemo4').valid()) { var ajaxUrl = ""; var jsonData = JSON.stringify($('#dialogformdemo4').serializeJSON()); if($("#formOption").val() == "add") { ajaxUrl = "../insert/demo4"; } else if ($("#formOption").val() == "edit") { ajaxUrl = "../update/demo4"; jsonData = jsonData.substring(0, jsonData.length-1) + ",\"ID\":"+$("#ID").val()+"}"; } else { ajaxUrl = ""; } $('#dialogdemo4').dialog('close');$.ajax({	type : "POST", url : ajaxUrl, data: jsonData, contentType: "application/json; charset=utf-8", dataType: "json", cache: false, success : function(result) { if(result['error']) { console.log(result['error']); $.each(result['error'], function(key, value) { console.log(value); document.getElementById("errMessage").innerHTML = ""; document.getElementById("errMessage").innerHTML += "<font color='red'>"+value+"</font><br>"; }); } else if(result['success']) { console.log(result['success']); $.each(result['success'], function(key, value) { console.log(value); document.getElementById("errMessage").innerHTML = ""; document.getElementById("errMessage").innerHTML += "<font color='green'>"+value+"</font><br>"; }); }}, error: function(XMLHttpRequest, textStatus, errorThrown) { document.getElementById("errMessage").innerHTML = "<font color='red'>Record insertion failed.</font>"; } }); $('#tabledemo4').DataTable().draw();  } } } });$('#dialogformdemo4').validate({rules : {code:{ required: true, pattern: /^[1-9]{1,}[0-9]{0,}$/ },name:{ required: true, pattern: /^[A-Za-z]{0,}$/ },dt:{ required: true },dob:{ required: true },}, messages: {df_code:{pattern: "Only digit allow, first character must be not Zero." },df_name:{pattern: "Only alphabets allow." },dt:{ required: "dt is required" },dob:{ required: "date of birth is required" },} }); }); </script></html>
